@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

:root {
  /* Classic 8-bit RPG color palette inspired by NES/SNES era games */
  --background: #F0E8D8;
  --foreground: #2B2821;
  --card: #F8F0E0;
  --card-foreground: #2B2821;
  --popover: #F8F0E0;
  --popover-foreground: #2B2821;
  --primary: #4A7C59;
  --primary-foreground: #F8F0E0;
  --secondary: #D97941;
  --secondary-foreground: #F8F0E0;
  --muted: #C9B8A0;
  --muted-foreground: #5A5048;
  --accent: #C94F3D;
  --accent-foreground: #F8F0E0;
  --destructive: #A73226;
  --destructive-foreground: #F8F0E0;
  --border: #2B2821;
  --input: #F8F0E0;
  --ring: #4A7C59;
  --chart-1: #4A7C59;
  --chart-2: #D97941;
  --chart-3: #C94F3D;
  --chart-4: #3D7BA8;
  --chart-5: #8B5A99;
  --radius: 0rem;
  --sidebar: #F8F0E0;
  --sidebar-foreground: #2B2821;
  --sidebar-primary: #4A7C59;
  --sidebar-primary-foreground: #F8F0E0;
  --sidebar-accent: #C9B8A0;
  --sidebar-accent-foreground: #2B2821;
  --sidebar-border: #2B2821;
  --sidebar-ring: #4A7C59;
}

.dark {
  /* Dark mode with classic RPG dungeon/cave colors */
  --background: #1A1F2E;
  --foreground: #E8DCC8;
  --card: #262E3F;
  --card-foreground: #E8DCC8;
  --popover: #262E3F;
  --popover-foreground: #E8DCC8;
  --primary: #5FAD75;
  --primary-foreground: #1A1F2E;
  --secondary: #E89A5D;
  --secondary-foreground: #1A1F2E;
  --muted: #3A4456;
  --muted-foreground: #A39685;
  --accent: #E66A53;
  --accent-foreground: #1A1F2E;
  --destructive: #C94F3D;
  --destructive-foreground: #E8DCC8;
  --border: #E8DCC8;
  --input: #3A4456;
  --ring: #5FAD75;
  --chart-1: #5FAD75;
  --chart-2: #E89A5D;
  --chart-3: #E66A53;
  --chart-4: #5B9AC8;
  --chart-5: #A577B8;
  --sidebar: #262E3F;
  --sidebar-foreground: #E8DCC8;
  --sidebar-primary: #5FAD75;
  --sidebar-primary-foreground: #1A1F2E;
  --sidebar-accent: #3A4456;
  --sidebar-accent-foreground: #E8DCC8;
  --sidebar-border: #E8DCC8;
  --sidebar-ring: #5FAD75;
}

@theme inline {
  /* Pixel fonts for authentic retro RPG feel */
  --font-pixel: 'Press Start 2P', 'Press Start 2P Fallback';
  --font-sans: 'Press Start 2P', 'Press Start 2P Fallback';
  --font-mono: 'Press Start 2P', 'Press Start 2P Fallback';
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: 0rem;
  --radius-md: 0rem;
  --radius-lg: 0rem;
  --radius-xl: 0rem;
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground font-pixel;
    /* Add scanline/CRT effect for authentic retro feel */
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
  }
}

/* Pixel art UI elements with chunky borders */
.pixel-border {
  border: 4px solid var(--color-border);
  box-shadow: 
    0 0 0 4px var(--color-background),
    0 0 0 8px var(--color-border);
}

.pixel-border-sm {
  border: 3px solid var(--color-border);
}

.pixel-button {
  border: 4px solid var(--color-border);
  box-shadow: 
    4px 4px 0 0 rgba(0, 0, 0, 0.25);
  transition: all 0.1s;
}

.pixel-button:active {
  transform: translate(2px, 2px);
  box-shadow: 
    2px 2px 0 0 rgba(0, 0, 0, 0.25);
}

.pixel-card {
  border: 4px solid var(--color-border);
  position: relative;
}

.pixel-card::before,
.pixel-card::after,
.pixel-card .corner-tl,
.pixel-card .corner-tr,
.pixel-card .corner-bl,
.pixel-card .corner-br {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--color-border);
}

.pixel-card::before {
  top: -4px;
  left: -4px;
}

.pixel-card::after {
  top: -4px;
  right: -4px;
}

.health-bar-container {
  border: 3px solid var(--color-border);
  background: var(--color-background);
  height: 20px;
  position: relative;
  overflow: hidden;
}

.health-bar-fill {
  height: 100%;
  background: repeating-linear-gradient(
    90deg,
    var(--color-primary),
    var(--color-primary) 4px,
    transparent 4px,
    transparent 8px
  );
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.xp-bar-container {
  border: 3px solid var(--color-border);
  background: var(--color-background);
  height: 16px;
  position: relative;
  overflow: hidden;
}

.xp-bar-fill {
  height: 100%;
  background: var(--color-accent);
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.xp-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 3px,
    rgba(255, 255, 255, 0.3) 3px,
    rgba(255, 255, 255, 0.3) 4px
  );
}

@keyframes xp-gain {
  0% { 
    transform: translateY(0) scale(1); 
    opacity: 1; 
  }
  50% { 
    transform: translateY(-30px) scale(1.8); 
    opacity: 1; 
  }
  100% { 
    transform: translateY(-60px) scale(1); 
    opacity: 0; 
  }
}

.xp-animation {
  animation: xp-gain 1.5s ease-out forwards;
  font-family: var(--font-pixel);
  text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

@keyframes quest-appear {
  0% { 
    transform: scale(0.5) rotate(-5deg); 
    opacity: 0; 
  }
  60% {
    transform: scale(1.1) rotate(2deg);
  }
  100% { 
    transform: scale(1) rotate(0deg); 
    opacity: 1; 
  }
}

.quest-card-appear {
  animation: quest-appear 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0; }
}

.pixel-blink {
  animation: blink 2s infinite;
}

@keyframes coin-collect {
  0% { 
    transform: translateY(0) scale(1) rotate(0deg); 
    opacity: 1; 
  }
  50% {
    transform: translateY(-20px) scale(1.3) rotate(180deg);
  }
  100% { 
    transform: translateY(-40px) scale(0.5) rotate(360deg); 
    opacity: 0; 
  }
}

.coin-animation {
  animation: coin-collect 1s ease-out forwards;
}

/* Text shadows for pixel art depth */
.text-pixel-shadow {
  text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
}

.text-pixel-shadow-sm {
  text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
}

/* Chunky scroll bars for pixel aesthetic */
::-webkit-scrollbar {
  width: 16px;
  height: 16px;
}

::-webkit-scrollbar-track {
  background: var(--color-muted);
  border: 3px solid var(--color-border);
}

::-webkit-scrollbar-thumb {
  background: var(--color-primary);
  border: 3px solid var(--color-border);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-accent);
}

/* Disable smooth fonts for authentic pixel look */
* {
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
  font-smooth: never;
}
